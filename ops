{"version":1,"ops":[{"type":6,"author":{"id":"c6a8cb5364bc3aec41d25e1ee1093680e858789c"},"timestamp":1532309480,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdDExMTAzMTE4OQ=="},"target":"c39e664843bd58c80d2f1999a8e6782050bea4ca494ab6ada04dd719bdefd05b","message":"I ran the AI over night and woke up to this soft-lock, at a 7th year goblin siege .  I wiped the save and started a new world, and hit it again, on the 7th year, goblin invasion.\n\n- Squad 1 has assigned targets, but 2 \u0026 3 do not. \n- Squad 3 has zero members\n- I can `esc` out and the game \u0026 ai continue normally, but only squad 1 heads into battle battle\n  - Side-note - Perhaps future enhancement could check if squads are idle? ex: one squad went down to fight a forgotten beast, while the others went up to fight a siege? (Maybe the AI already handles this?)\n\n![image](https://user-images.githubusercontent.com/8008527/43052541-caa79f18-8df4-11e8-8b42-25a6f76d1d91.png)\n\n\n### Console Log\n```\n00007-10-02:0990 found next cavern\n00007-10-03:0001 Ordering squad The Frills of Working to kill Smunstu Aslotsaslu, Goblin Spearman: marauder\n00007-10-03:0001 Ordering squad The Fenced Fortifications to kill Osta Urarstato, Goblin Pikeman: marauder\n00007-10-03:0001 Ordering squad The Frills of Working to kill Ngoso Urarangot, Goblin Lasher: marauder\n00007-10-03:0001 Ordering squad The Fenced Fortifications to kill Strodno Ultaslaxu, Goblin Bowman: marauder\n00007-10-03:0001 Ordering squad The Frills of Working to kill Tode Omospostest, Goblin Hammerman: marauder\n00007-10-03:0001 Ordering squad The Fenced Fortifications to kill Nako Utesdusmun, Goblin Axeman: marauder\n00007-10-03:0001 Ordering squad The Mechanical Champions to kill Ngokang Uksosmugub, Goblin Axeman: marauder\n00007-10-03:0001 Ordering squad The Frills of Working to kill Smunstu Spubtastosbûb, Goblin Bowman: marauder\n00007-10-03:0001 Ordering squad The Fenced Fortifications to kill Atu Okalsong, Goblin Spearman: marauder\n00007-10-03:0001 Ordering squad The Mechanical Champions to kill Quelge Ejedatkil, Goblin Hammerman: marauder\n\n```\n\n-------\n\n### ai status\n(df-ai from 7/20/18 build master)\n```\n[DFHack]# ai\nDwarf Fortress 0.44.12\n  Windows 64-bit\ndf-ai 0.44.12-r1-7-g4f1caba0\n  code 4f1caba055d0b53f839557707b9a326d9daf94a7\nDFHack 0.44.12-r1-0-gc2a64b35\n  library c2a64b3573abbee549761f5c1c2626eec7a6e81c\n  structures 23500e4e9bd1885365d0a2ef1746c321c1dd5094\nPlan: check_furnish: 55, check_idle: 1, check_rooms: 1, construct_activityzone: 1, construct_farmplot: 120, dig_room: 3, furnish: 503, monitor_farm_irrigation: 120, setup_farmplot: 34, want_dig: 92, waiting to dig: bedroom (plan)\nfurnishing: archery_target: 5, armor_stand: 56, bed: 54, bookcase: 1, cabinet: 62, cage: 24, chair: 5, chest: 63, coffin: 72, door: 107, hatch: 32, restraint: 10, table: 1, traction_bench: 7, weapon_rack: 9\nPop: 94 citizen, 5 military, 21 pet, 0 visitor, 0 resident\nStocks: need: armor_feet, armor_hands, armor_head, armor_legs, armor_shield, armor_stand, armor_torso, backpack, barrel, bed, bin, cabinet, cage_metal, chair, chest, clothes_feet, clothes_hands, clothes_head, clothes_legs, clothes_torso, coal, coffin, door, dye, dye_seeds, flask, food_storage, gypsum, hatch_cover, paper, plaster_powder, quire, raw_coke, rope, slurry, table, thread_seeds, traction_bench, weapon_rack, weapon_ranged; use: clay, cloth_nodye, drink_fruit, drink_plant, food_ingredients, metal_ore, mill_plant, rough_gem, tallow, wool\nCamera: inactive (previously: Inod Rigòthsat, hammerer; Sigun Rigòthnåzom, Weaponsmith; Etur Lolorònul, Miller)\n[DFHack]#\n```","files":null},{"type":6,"author":{"id":"c6a8cb5364bc3aec41d25e1ee1093680e858789c"},"timestamp":1532309732,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdDExMTAzMjAzNg=="},"target":"c39e664843bd58c80d2f1999a8e6782050bea4ca494ab6ada04dd719bdefd05b","message":"Ran the AI over night and woke up to a soft-lock, at a 7th year goblin siege .  Deleted save and started a new world, and hit soft-lock again, on the 7th year, goblin invasion.\n\n- Squad 1 has assigned targets, but 2 \u0026 3 do not. \n- Squad 3 has zero members\n- I can `esc` out and the game \u0026 ai continue normally, but only squad 1 heads into battle battle\n  - Side-note - Perhaps future enhancement could check if squads are idle? ex: one squad went down to fight a forgotten beast, while the others went up to fight a siege? (Maybe the AI already handles this?)\n\n![image](https://user-images.githubusercontent.com/8008527/43052541-caa79f18-8df4-11e8-8b42-25a6f76d1d91.png)\n\n\n### Console Log\n```\n00007-10-02:0990 found next cavern\n00007-10-03:0001 Ordering squad The Frills of Working to kill Smunstu Aslotsaslu, Goblin Spearman: marauder\n00007-10-03:0001 Ordering squad The Fenced Fortifications to kill Osta Urarstato, Goblin Pikeman: marauder\n00007-10-03:0001 Ordering squad The Frills of Working to kill Ngoso Urarangot, Goblin Lasher: marauder\n00007-10-03:0001 Ordering squad The Fenced Fortifications to kill Strodno Ultaslaxu, Goblin Bowman: marauder\n00007-10-03:0001 Ordering squad The Frills of Working to kill Tode Omospostest, Goblin Hammerman: marauder\n00007-10-03:0001 Ordering squad The Fenced Fortifications to kill Nako Utesdusmun, Goblin Axeman: marauder\n00007-10-03:0001 Ordering squad The Mechanical Champions to kill Ngokang Uksosmugub, Goblin Axeman: marauder\n00007-10-03:0001 Ordering squad The Frills of Working to kill Smunstu Spubtastosbûb, Goblin Bowman: marauder\n00007-10-03:0001 Ordering squad The Fenced Fortifications to kill Atu Okalsong, Goblin Spearman: marauder\n00007-10-03:0001 Ordering squad The Mechanical Champions to kill Quelge Ejedatkil, Goblin Hammerman: marauder\n\n```\n\n-------\n\n### ai status\n(df-ai from 7/20/18 build master)\n```\n[DFHack]# ai\nDwarf Fortress 0.44.12\n  Windows 64-bit\ndf-ai 0.44.12-r1-7-g4f1caba0\n  code 4f1caba055d0b53f839557707b9a326d9daf94a7\nDFHack 0.44.12-r1-0-gc2a64b35\n  library c2a64b3573abbee549761f5c1c2626eec7a6e81c\n  structures 23500e4e9bd1885365d0a2ef1746c321c1dd5094\nPlan: check_furnish: 55, check_idle: 1, check_rooms: 1, construct_activityzone: 1, construct_farmplot: 120, dig_room: 3, furnish: 503, monitor_farm_irrigation: 120, setup_farmplot: 34, want_dig: 92, waiting to dig: bedroom (plan)\nfurnishing: archery_target: 5, armor_stand: 56, bed: 54, bookcase: 1, cabinet: 62, cage: 24, chair: 5, chest: 63, coffin: 72, door: 107, hatch: 32, restraint: 10, table: 1, traction_bench: 7, weapon_rack: 9\nPop: 94 citizen, 5 military, 21 pet, 0 visitor, 0 resident\nStocks: need: armor_feet, armor_hands, armor_head, armor_legs, armor_shield, armor_stand, armor_torso, backpack, barrel, bed, bin, cabinet, cage_metal, chair, chest, clothes_feet, clothes_hands, clothes_head, clothes_legs, clothes_torso, coal, coffin, door, dye, dye_seeds, flask, food_storage, gypsum, hatch_cover, paper, plaster_powder, quire, raw_coke, rope, slurry, table, thread_seeds, traction_bench, weapon_rack, weapon_ranged; use: clay, cloth_nodye, drink_fruit, drink_plant, food_ingredients, metal_ore, mill_plant, rough_gem, tallow, wool\nCamera: inactive (previously: Inod Rigòthsat, hammerer; Sigun Rigòthnåzom, Weaponsmith; Etur Lolorònul, Miller)\n[DFHack]#\n```","files":null},{"type":5,"author":{"id":"5ff63cc106aa5ba7b893d7126eb025e41b25a791"},"timestamp":1532527636,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDE3NTI2OTM3Nzc="},"added":["soft lock"],"removed":[]},{"type":3,"author":{"id":"5ff63cc106aa5ba7b893d7126eb025e41b25a791"},"timestamp":1532527683,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDQwNzc2Njc0NA==","github-url":"https://github.com/BenLubar/df-ai/issues/52#issuecomment-407766744"},"message":"Yeah, I've been trying to figure out why this is happening for the last few days. It seems like it happens whenever multiple squads are being assigned targets at the same time.","files":null},{"type":3,"author":{"id":"5ff63cc106aa5ba7b893d7126eb025e41b25a791"},"timestamp":1532530257,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDQwNzc4MjE2MA==","github-url":"https://github.com/BenLubar/df-ai/issues/52#issuecomment-407782160"},"message":"By the way, the bug that causes `ai version`'s output to be merged with the next command's output was fixed in e409f8c0de234834584c4a3ca322d7116786ca34.","files":null},{"type":3,"author":{"id":"c6a8cb5364bc3aec41d25e1ee1093680e858789c"},"timestamp":1532558000,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDQwNzkxNzc2NQ==","github-url":"https://github.com/BenLubar/df-ai/issues/52#issuecomment-407917765"},"message":"Uneducated guess: Perhaps you need to delay a little between each squad?  Maybe the game is still iterating the list for squad 1 while you're attempting to assign squad 2's targets?","files":null},{"type":4,"author":{"id":"5ff63cc106aa5ba7b893d7126eb025e41b25a791"},"timestamp":1532748237,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50MTc1ODM4OTMzNQ=="},"status":2}]}