{"version":1,"ops":[{"type":1,"author":{"id":"c6a8cb5364bc3aec41d25e1ee1093680e858789c"},"timestamp":1534812565,"metadata":{"github-id":"MDU6SXNzdWUzNTIzNDU2Njk=","github-url":"https://github.com/BenLubar/df-ai/issues/62","origin":"github"},"title":"Error when AI attempts to use deployed squad(s)","message":"**Describe the bug**\nAI errors when trying to utilize a manually deployed squad.\n\n**What happened**\n- Player messes with DF while AI is doing its job, sending three squads off to raze a goblin fortress\n- Hostiles arrive while the three squads were still away\n- AI expected all squads to be home/available\n- Military portion of AI errors out (listed below), but AI continues to run manager, farming, and other modules.\n   - (Unsure if the other two available squads engaged the hostiles or not)\n\n**Expected behavior**\nAdd a check of some sort to see if the selected squad is home or away, before trying to assign targets.\n\n**Visual reference**\nListing targets isn't available for away-squads\n![image](https://user-images.githubusercontent.com/8008527/44373334-aab82c80-a4b6-11e8-904f-f8675d0c9301.png)\n\n\n```\ndf-ai debug log opened. version information follows:\nDwarf Fortress 0.44.12\n  Windows 64-bit\ndf-ai 0.44.12-r1-update1-14-g0c6225b2\n  code 0c6225b2fa9a12e483b7a513adcc45b98a99a684\nDFHack 0.44.12-r1-1-g55d5d477\n  library 55d5d4777619e061ba63fc66901dec63ca23d141\n  structures 23500e4e9bd1885365d0a2ef1746c321c1dd5094\nAssertion failed on population_military.cpp line 983: ui-\u003esquads.in_kill_order \u0026\u0026 !ui-\u003esquads.in_kill_list\nfailed to enter target mode\n\nAssertion failed on population_military.cpp line 985: ui-\u003esquads.in_kill_list\nfailed to enter target list\n\nAssertion failed on population_military.cpp line 983: ui-\u003esquads.in_kill_order \u0026\u0026 !ui-\u003esquads.in_kill_list\nfailed to enter target mode\n\nAssertion failed on population_military.cpp line 985: ui-\u003esquads.in_kill_list\nfailed to enter target list\n\n\n\ndf-ai debug log opened. version information follows:\nDwarf Fortress 0.44.12\n  Windows 64-bit\ndf-ai 0.44.12-r1-update1-14-g0c6225b2\n  code 0c6225b2fa9a12e483b7a513adcc45b98a99a684\nDFHack 0.44.12-r1-1-g55d5d477\n  library 55d5d4777619e061ba63fc66901dec63ca23d141\n  structures 23500e4e9bd1885365d0a2ef1746c321c1dd5094\nAssertion failed on population_military.cpp line 983: ui-\u003esquads.in_kill_order \u0026\u0026 !ui-\u003esquads.in_kill_list\nfailed to enter target mode\n\nAssertion failed on population_military.cpp line 985: ui-\u003esquads.in_kill_list\nfailed to enter target list\n\nAssertion failed on population_military.cpp line 983: ui-\u003esquads.in_kill_order \u0026\u0026 !ui-\u003esquads.in_kill_list\nfailed to enter target mode\n\nAssertion failed on population_military.cpp line 985: ui-\u003esquads.in_kill_list\nfailed to enter target list\n```","files":null}]}